version: "3.8"
services:
  vacant-lots-proj:
    build: .
    environment:
      - CFP_MAPBOX_TOKEN_UPLOADER
      - VACANT_LOTS_DB=${POSTGRES_LOCAL_PATH}
      - VACANT_LOTS_DB_REMOTE
      - PYTHONUNBUFFERED=1
    volumes:
      - ./src:/usr/src/app
    extra_hosts:
      - "host.docker.internal:host-gateway"

  formatter:
    build: .
    volumes:
      - ./src:/usr/src/app
    command: sh -c "pipenv run black /usr/src/app"